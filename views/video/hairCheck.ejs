<%- include('../layouts/layout.ejs'); %>
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card">
                    <h2>Video Call Hair Check</h2>
                    <h3>Room -
                        <%= roomName %>
                    </h3>
                    <div class="card-body">
                        <div class="card p-0">
                            <div id="hairCheck" style='width: 100%; overflow: hidden;'>
                            </div>
                        </div>
                        <a href="/video/video-call">
                            <button class="btn btn-primary btn-lg btn-block login-button">Join</button>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    </body>

    </html>
    <script src="//sdk.twilio.com/js/video/releases/2.17.1/twilio-video.min.js"></script>
    <style>
        video {
            width: 100%;
            overflow: hidden;
            border-radius: var(--card-border-radius);
            border: var(--card-border-width) solid var(--lm-card-border-color);
            transform: rotateY(180deg);
            -webkit-transform: rotateY(180deg);
            /* Safari and Chrome */
            -moz-transform: rotateY(180deg);
        }
    </style>
    <script>
        // display a local video stream to the user can check their camera is working
        const Video = Twilio.Video;
        const hairCheckView = document.getElementById('hairCheck');
        Video.createLocalVideoTrack().then(track => {
            Video.createLocalAudioTrack();
            hairCheckView.appendChild(track.attach());
        });
    </script>